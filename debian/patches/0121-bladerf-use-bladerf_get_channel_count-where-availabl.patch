From b4e69137f38aed3d359722afe79a5215a63998ef Mon Sep 17 00:00:00 2001
From: Rey Tucker <rey.tucker@nuand.com>
Date: Tue, 19 Sep 2017 16:18:00 -0400
Subject: [PATCH 121/131] bladerf: use bladerf_get_channel_count where
 available

---
 lib/bladerf/bladerf_common.cc | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

diff --git a/lib/bladerf/bladerf_common.cc b/lib/bladerf/bladerf_common.cc
index b8cc482..6711cf4 100644
--- a/lib/bladerf/bladerf_common.cc
+++ b/lib/bladerf/bladerf_common.cc
@@ -423,15 +423,11 @@ bladerf_board_type bladerf_common::get_board_type()
 
 size_t bladerf_common::get_max_channels(bladerf_direction direction)
 {
-  if (BLADERF_RX == direction) {
-    return _max_chans.find(get_board_type())->second.first;
-  }
-
-  if (BLADERF_TX == direction) {
-    return _max_chans.find(get_board_type())->second.second;
-  }
-
-  return 0;
+#ifdef BLADERF_COMPATIBILITY
+  return 1;
+#else
+  return bladerf_get_channel_count(_dev.get(), (BLADERF_TX == direction));
+#endif
 }
 
 void bladerf_common::set_channel_enable(bladerf_channel ch, bool enable)
-- 
2.20.1

